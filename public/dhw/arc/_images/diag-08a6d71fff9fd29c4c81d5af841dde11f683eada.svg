<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1069px" preserveAspectRatio="none" style="width:3568px;height:1069px;background:#FFFFFF;" version="1.1" viewBox="0 0 3568 1069" width="3568px" zoomAndPan="magnify"><defs><filter height="300%" id="f9av8exfph9mh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="87" x2="87" y1="40.7999" y2="1025.4003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="866" x2="866" y1="40.7999" y2="1025.4003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1834.5" x2="1834.5" y1="40.7999" y2="1025.4003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2147.5" x2="2147.5" y1="40.7999" y2="1025.4003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2458.5" x2="2458.5" y1="40.7999" y2="1025.4003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2726.5" x2="2726.5" y1="40.7999" y2="1025.4003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2984.5" x2="2984.5" y1="40.7999" y2="1025.4003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3195.5" x2="3195.5" y1="40.7999" y2="1025.4003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3459" x2="3459" y1="40.7999" y2="1025.4003"/><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="160" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="12" y="25.9999">[repo_sys].[SysColumn]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="160" x="5" y="1024.4003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="12" y="1045.4002">[repo_sys].[SysColumn]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="180" x="774" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="781" y="25.9999">[repo].[RepoObjectColumn]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="180" x="774" y="1024.4003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="781" y="1045.4002">[repo].[RepoObjectColumn]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="211" x="1727.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197" x="1734.5" y="25.9999">[repo].[RepoObject_persistence]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="211" x="1727.5" y="1024.4003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197" x="1734.5" y="1045.4002">[repo].[RepoObject_persistence]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="386" x="1952.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="372" x="1959.5" y="25.9999">repo.RepoObjectColumn_RequiredRepoObjectColumnMerge</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="386" x="1952.5" y="1024.4003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="372" x="1959.5" y="1045.4002">repo.RepoObjectColumn_RequiredRepoObjectColumnMerge</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="209" x="2352.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="2359.5" y="25.9999">[repo_sys].[RepoObjectColumn]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="209" x="2352.5" y="1024.4003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="2359.5" y="1045.4002">[repo_sys].[RepoObjectColumn]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="299" x="2575.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="285" x="2582.5" y="25.9999">[reference].[RepoObjectColumnSource_virtual]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="299" x="2575.5" y="1024.4003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="285" x="2582.5" y="1045.4002">[reference].[RepoObjectColumnSource_virtual]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="188" x="2888.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="2895.5" y="25.9999">[repo].[IndexColumn_virtual]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="188" x="2888.5" y="1024.4003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="2895.5" y="1045.4002">[repo].[IndexColumn_virtual]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="207" x="3090.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="3097.5" y="25.9999">[graph].[RepoObjectColumn_S]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="207" x="3090.5" y="1024.4003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="3097.5" y="1045.4002">[graph].[RepoObjectColumn_S]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="190" x="3362" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="3369" y="25.9999">[graph].[RepoObjectColumn]</text><rect fill="#FEFECE" filter="url(#f9av8exfph9mh)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="190" x="3362" y="1024.4003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="3369" y="1045.4002">[graph].[RepoObjectColumn]</text><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="3561" x="0" y="71.5999"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="71.5999" y2="71.5999"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="74.5999" y2="74.5999"/><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="329" x="1616" y="60.7999"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="311" x="1622" y="77.7999">[repo].[usp_sync_guid_RepoObjectColumn] - start</text><ellipse cx="865.5" cy="117.25" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="848.5,114,858.5,118,848.5,122,852.5,118" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="87" x2="854.5" y1="118" y2="118"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="465" x="94" y="113.4">UPDATE repo_sys.SysColumn_RepoObjectColumn_via_RepoObjectColumn_guid</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="871" y="99.3999"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="875" y="116.4">0</text><ellipse cx="865.5" cy="161.85" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="866" x2="908" y1="149.6" y2="149.6"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="908" x2="908" y1="149.6" y2="162.6"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="871" x2="908" y1="162.6" y2="162.6"/><polygon fill="#A80036" points="881,158.6,871,162.6,881,166.6,877,162.6" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="581" x="873" y="145">SET [SysObjectColumn_name] = [RepoObjectColumn_guid] (to avoid conflict in the next INSERT step)</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="1466" y="137.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="1470" y="154.5">0</text><polygon fill="#A80036" points="854,190.2,864,194.2,854,198.2,858,194.2" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="87" x2="860" y1="194.2" y2="194.2"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="725" x="94" y="189.6">[SysObject_RepoObjectColumn_guid] -&gt; [RepoObjectColumn_guid] ([RepoObjectColumn_guid] is stored in extended properties)</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="22" x="871" y="175.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="875" y="192.6">14</text><line style="stroke:#A80036;stroke-width:2.0;" x1="848" x2="858" y1="222.8" y2="232.8"/><line style="stroke:#A80036;stroke-width:2.0;" x1="848" x2="858" y1="232.8" y2="222.8"/><line style="stroke:#A80036;stroke-width:1.0;" x1="87" x2="853" y1="227.8" y2="227.8"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="722" x="94" y="223.2">DELETE repo.RepoObjectColumn, WHERE (RowNumberOverName &gt; 1); via [repo].[SysColumn_RepoObjectColumn_via_name]</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="22" x="871" y="209.2"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="875" y="226.2">14</text><polygon fill="#A80036" points="854,257.4,864,261.4,854,265.4,858,261.4" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="87" x2="860" y1="261.4" y2="261.4"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="94" y="256.8">INSERT still missing Column</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="871" y="242.8"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="875" y="259.8">0</text><ellipse cx="865.5" cy="305.25" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="866" x2="908" y1="293" y2="293"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="908" x2="908" y1="293" y2="306"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="871" x2="908" y1="306" y2="306"/><polygon fill="#A80036" points="881,302,871,306,881,310,877,306" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="806" x="873" y="288.4">SET [RepoObjectColumn_name] = [SysObjectColumn_name] WHERE (has_different_sys_names = 1) AND (ISNULL(is_repo_managed, 0) = 0)</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="1691" y="280.9"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="1695" y="297.9">0</text><ellipse cx="865.5" cy="336.85" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="848.5,333.6,858.5,337.6,848.5,341.6,852.5,337.6" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="87" x2="854.5" y1="337.6" y2="337.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="94" y="333">other properties, where (ISNULL(is_repo_managed, 0) = 0)</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="871" y="319"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="875" y="336">0</text><ellipse cx="865.5" cy="370.4501" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="848.5,367.2001,858.5,371.2001,848.5,375.2001,852.5,371.2001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="87" x2="854.5" y1="371.2001" y2="371.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="755" x="94" y="366.6">persistence: update RepoObjectColumn_name and repo attributes from sys attributes of persistence_source_RepoObjectColumn_guid</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="871" y="352.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="875" y="369.6">0</text><ellipse cx="865.5" cy="415.0501" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="866" x2="908" y1="402.8001" y2="402.8001"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="908" x2="908" y1="402.8001" y2="415.8001"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="871" x2="908" y1="415.8001" y2="415.8001"/><polygon fill="#A80036" points="881,411.8001,871,415.8001,881,419.8001,877,415.8001" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="955" x="873" y="398.2001">persistence: [roc_p].[persistence_source_RepoObjectColumn_guid] = [roc_s].[RepoObjectColumn_guid] (matching by column name via [repo].[RepoObject_persistence])</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="1840" y="390.7001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="1844" y="407.7001">0</text><line style="stroke:#A80036;stroke-width:1.0;" x1="866" x2="908" y1="445.4001" y2="445.4001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="908" x2="908" y1="445.4001" y2="458.4001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="867" x2="908" y1="458.4001" y2="458.4001"/><polygon fill="#A80036" points="877,454.4001,867,458.4001,877,462.4001,873,458.4001" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="357" x="873" y="440.8001">persistence: add missing persistence columns existing in source</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="1242" y="433.3001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="1246" y="450.3001">0</text><polygon fill="#A80036" points="877,486.0001,867,490.0001,877,494.0001,873,490.0001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="871" x2="1834" y1="490.0001" y2="490.0001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="883" y="485.4001">persistence: insert missing HistValidColumns</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="1840" y="471.4001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="1844" y="488.4001">0</text><ellipse cx="865.5" cy="533.8501" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="866" x2="908" y1="521.6001" y2="521.6001"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="908" x2="908" y1="521.6001" y2="534.6001"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="871" x2="908" y1="534.6001" y2="534.6001"/><polygon fill="#A80036" points="881,530.6001,871,534.6001,881,538.6001,877,534.6001" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="553" x="873" y="517.0001">persistence: SET [persistence_source_RepoObjectColumn_guid] = NULL (missing source column)</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="1438" y="509.5001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="1442" y="526.5001">0</text><ellipse cx="865.5" cy="565.4501" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="882.5,562.2001,872.5,566.2001,882.5,570.2001,878.5,566.2001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="880.5" x2="2146.5" y1="566.2001" y2="566.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="498" x="883" y="561.6001">merge columns, defined in repo.RepoObjectColumn_RequiredRepoObjectColumnMerge</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="2152" y="547.6001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="2156" y="564.6001">0</text><polygon fill="#A80036" points="98,593.8001,88,597.8001,98,601.8001,94,597.8001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="92" x2="865" y1="597.8001" y2="597.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="475" x="104" y="593.2001">write RepoObjectColumn_guid into extended properties of SysObjectColumn, Level2</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="8" style="stroke:#A80036;stroke-width:1.0;" width="8" x="871" y="587.0001"/><ellipse cx="865.5" cy="628.6501" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="848.5,625.4001,858.5,629.4001,848.5,633.4001,852.5,629.4001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="87" x2="854.5" y1="629.4001" y2="629.4001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="94" y="624.8001">SET [is_SysObjectColumn_missing] = 1</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="871" y="610.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="875" y="627.8001">0</text><line style="stroke:#A80036;stroke-width:2.0;" x1="872" x2="882" y1="658.0002" y2="668.0002"/><line style="stroke:#A80036;stroke-width:2.0;" x1="872" x2="882" y1="668.0002" y2="658.0002"/><line style="stroke:#A80036;stroke-width:1.0;" x1="878" x2="2458" y1="663.0002" y2="663.0002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="491" x="883" y="658.4002">where is_SysObjectColumn_missing = 1, but not in objects which are is_repo_managed</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="2464" y="644.4001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="2468" y="661.4002">0</text><line style="stroke:#A80036;stroke-width:2.0;" x1="2709" x2="2719" y1="691.6002" y2="701.6002"/><line style="stroke:#A80036;stroke-width:2.0;" x1="2709" x2="2719" y1="701.6002" y2="691.6002"/><line style="stroke:#A80036;stroke-width:1.0;" x1="866" x2="2714" y1="696.6002" y2="696.6002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="588" x="873" y="692.0002">DELETE from [reference].[RepoObjectColumnSource_virtual] invalid [Source_RepoObjectColumn_guid]</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="2732" y="678.0002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="2736" y="695.0002">0</text><line style="stroke:#A80036;stroke-width:2.0;" x1="2966.5" x2="2976.5" y1="725.2002" y2="735.2002"/><line style="stroke:#A80036;stroke-width:2.0;" x1="2966.5" x2="2976.5" y1="735.2002" y2="725.2002"/><line style="stroke:#A80036;stroke-width:1.0;" x1="866" x2="2971.5" y1="730.2002" y2="730.2002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="330" x="873" y="725.6002">DELETE from [repo].[IndexColumn_virtual] invalid columns</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="2989" y="711.6002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="2993" y="728.6002">0</text><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="3561" x="0" y="761.0002"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="761.0002" y2="761.0002"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="764.0002" y2="764.0002"/><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="329" x="1616" y="750.2002"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="311" x="1622" y="767.2002">[graph].[usp_PERSIST_RepoObjectColumn] - start</text><line style="stroke:#A80036;stroke-width:2.0;" x1="3441" x2="3451" y1="802.4002" y2="812.4002"/><line style="stroke:#A80036;stroke-width:2.0;" x1="3441" x2="3451" y1="812.4002" y2="802.4002"/><line style="stroke:#A80036;stroke-width:1.0;" x1="3196" x2="3446" y1="807.4002" y2="807.4002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="3203" y="802.8002">delete persistence target missing in source</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="3464" y="788.8002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="3468" y="805.8002">0</text><ellipse cx="3458.5" cy="840.2502" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="3441.5,837.0002,3451.5,841.0002,3441.5,845.0002,3445.5,841.0002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="3196" x2="3447.5" y1="841.0002" y2="841.0002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="3203" y="836.4002">update changed</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="3464" y="822.4002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="3468" y="839.4002">2</text><polygon fill="#A80036" points="3447,870.6002,3457,874.6002,3447,878.6002,3451,874.6002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="3196" x2="3453" y1="874.6002" y2="874.6002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="3203" y="870.0002">insert missing</text><rect fill="#FBFB77" filter="url(#f9av8exfph9mh)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="22" x="3464" y="856.0002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="3468" y="873.0002">42</text><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="3561" x="0" y="905.4002"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="905.4002" y2="905.4002"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="908.4002" y2="908.4002"/><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="326" x="1617.5" y="894.6002"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="308" x="1623.5" y="911.6003">[graph].[usp_PERSIST_RepoObjectColumn] - end</text><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="3561" x="0" y="949.0003"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="949.0003" y2="949.0003"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="952.0003" y2="952.0003"/><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="676" x="1442.5" y="938.2003"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="658" x="1448.5" y="955.2003">[repo].[usp_sync_guid_RepoObjectColumn] - UPDATE [graph].[RepoObjectColumn] - ensure current case</text><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="3561" x="0" y="992.6003"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="992.6003" y2="992.6003"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3561" y1="995.6003" y2="995.6003"/><rect fill="#EEEEEE" filter="url(#f9av8exfph9mh)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="326" x="1617.5" y="981.8003"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="308" x="1623.5" y="998.8003">[repo].[usp_sync_guid_RepoObjectColumn] - end</text><!--MD5=[6518801f956c210819fb3f0683a2ab56]
@startuml
'skinparam maxmessagesize 220

== [repo].[usp_sync_guid_RepoObjectColumn] - start ==

"[repo_sys].[SysColumn]" ->O "[repo].[RepoObjectColumn]" : UPDATE repo_sys.SysColumn_RepoObjectColumn_via_RepoObjectColumn_guid
rnote right:0
"[repo].[RepoObjectColumn]" ->O "[repo].[RepoObjectColumn]" : SET [SysObjectColumn_name] = [RepoObjectColumn_guid] (to avoid conflict in the next INSERT step)
rnote right:0
"[repo_sys].[SysColumn]" -> "[repo].[RepoObjectColumn]" : [SysObject_RepoObjectColumn_guid] -> [RepoObjectColumn_guid] ([RepoObjectColumn_guid] is stored in extended properties)
rnote right:14
"[repo_sys].[SysColumn]" ->x "[repo].[RepoObjectColumn]" : DELETE repo.RepoObjectColumn, WHERE (RowNumberOverName > 1); via [repo].[SysColumn_RepoObjectColumn_via_name]
rnote right:14
"[repo_sys].[SysColumn]" -> "[repo].[RepoObjectColumn]" : INSERT still missing Column
rnote right:0
"[repo].[RepoObjectColumn]" ->O "[repo].[RepoObjectColumn]" : SET [RepoObjectColumn_name] = [SysObjectColumn_name] WHERE (has_different_sys_names = 1) AND (ISNULL(is_repo_managed, 0) = 0)
rnote right:0
"[repo_sys].[SysColumn]" ->O "[repo].[RepoObjectColumn]" : other properties, where (ISNULL(is_repo_managed, 0) = 0)
rnote right:0
"[repo_sys].[SysColumn]" ->O "[repo].[RepoObjectColumn]" : persistence: update RepoObjectColumn_name and repo attributes from sys attributes of persistence_source_RepoObjectColumn_guid
rnote right:0
"[repo].[RepoObjectColumn]" ->O "[repo].[RepoObjectColumn]" : persistence: [roc_p].[persistence_source_RepoObjectColumn_guid] = [roc_s].[RepoObjectColumn_guid] (matching by column name via [repo].[RepoObject_persistence])
rnote right:0
"[repo].[RepoObjectColumn]" -> "[repo].[RepoObjectColumn]" : persistence: add missing persistence columns existing in source
rnote right:0
"[repo].[RepoObject_persistence]" -> "[repo].[RepoObjectColumn]" : persistence: insert missing HistValidColumns
rnote right:0
"[repo].[RepoObjectColumn]" ->O "[repo].[RepoObjectColumn]" : persistence: SET [persistence_source_RepoObjectColumn_guid] = NULL (missing source column)
rnote right:0
"repo.RepoObjectColumn_RequiredRepoObjectColumnMerge" ->O "[repo].[RepoObjectColumn]" : merge columns, defined in repo.RepoObjectColumn_RequiredRepoObjectColumnMerge
rnote right:0
"[repo].[RepoObjectColumn]" - -> "[repo_sys].[SysColumn]" : write RepoObjectColumn_guid into extended properties of SysObjectColumn, Level2
rnote right:
"[repo_sys].[SysColumn]" ->O "[repo].[RepoObjectColumn]" : SET [is_SysObjectColumn_missing] = 1
rnote right:0
"[repo_sys].[RepoObjectColumn]" ->x "[repo].[RepoObjectColumn]" : where is_SysObjectColumn_missing = 1, but not in objects which are is_repo_managed
rnote right:0
"[repo].[RepoObjectColumn]" ->x "[reference].[RepoObjectColumnSource_virtual]" : DELETE from [reference].[RepoObjectColumnSource_virtual] invalid [Source_RepoObjectColumn_guid]
rnote right:0
"[repo].[RepoObjectColumn]" ->x "[repo].[IndexColumn_virtual]" : DELETE from [repo].[IndexColumn_virtual] invalid columns
rnote right:0

== [graph].[usp_PERSIST_RepoObjectColumn] - start ==

"[graph].[RepoObjectColumn_S]" ->x "[graph].[RepoObjectColumn]" : delete persistence target missing in source
rnote right:0
"[graph].[RepoObjectColumn_S]" ->O "[graph].[RepoObjectColumn]" : update changed
rnote right:2
"[graph].[RepoObjectColumn_S]" -> "[graph].[RepoObjectColumn]" : insert missing
rnote right:42

== [graph].[usp_PERSIST_RepoObjectColumn] - end ==


== [repo].[usp_sync_guid_RepoObjectColumn] - UPDATE [graph].[RepoObjectColumn] - ensure current case ==


== [repo].[usp_sync_guid_RepoObjectColumn] - end ==
@enduml

@startuml

== [repo].[usp_sync_guid_RepoObjectColumn] - start ==

"[repo_sys].[SysColumn]" ->O "[repo].[RepoObjectColumn]" : UPDATE repo_sys.SysColumn_RepoObjectColumn_via_RepoObjectColumn_guid
rnote right:0
"[repo].[RepoObjectColumn]" ->O "[repo].[RepoObjectColumn]" : SET [SysObjectColumn_name] = [RepoObjectColumn_guid] (to avoid conflict in the next INSERT step)
rnote right:0
"[repo_sys].[SysColumn]" -> "[repo].[RepoObjectColumn]" : [SysObject_RepoObjectColumn_guid] -> [RepoObjectColumn_guid] ([RepoObjectColumn_guid] is stored in extended properties)
rnote right:14
"[repo_sys].[SysColumn]" ->x "[repo].[RepoObjectColumn]" : DELETE repo.RepoObjectColumn, WHERE (RowNumberOverName > 1); via [repo].[SysColumn_RepoObjectColumn_via_name]
rnote right:14
"[repo_sys].[SysColumn]" -> "[repo].[RepoObjectColumn]" : INSERT still missing Column
rnote right:0
"[repo].[RepoObjectColumn]" ->O "[repo].[RepoObjectColumn]" : SET [RepoObjectColumn_name] = [SysObjectColumn_name] WHERE (has_different_sys_names = 1) AND (ISNULL(is_repo_managed, 0) = 0)
rnote right:0
"[repo_sys].[SysColumn]" ->O "[repo].[RepoObjectColumn]" : other properties, where (ISNULL(is_repo_managed, 0) = 0)
rnote right:0
"[repo_sys].[SysColumn]" ->O "[repo].[RepoObjectColumn]" : persistence: update RepoObjectColumn_name and repo attributes from sys attributes of persistence_source_RepoObjectColumn_guid
rnote right:0
"[repo].[RepoObjectColumn]" ->O "[repo].[RepoObjectColumn]" : persistence: [roc_p].[persistence_source_RepoObjectColumn_guid] = [roc_s].[RepoObjectColumn_guid] (matching by column name via [repo].[RepoObject_persistence])
rnote right:0
"[repo].[RepoObjectColumn]" -> "[repo].[RepoObjectColumn]" : persistence: add missing persistence columns existing in source
rnote right:0
"[repo].[RepoObject_persistence]" -> "[repo].[RepoObjectColumn]" : persistence: insert missing HistValidColumns
rnote right:0
"[repo].[RepoObjectColumn]" ->O "[repo].[RepoObjectColumn]" : persistence: SET [persistence_source_RepoObjectColumn_guid] = NULL (missing source column)
rnote right:0
"repo.RepoObjectColumn_RequiredRepoObjectColumnMerge" ->O "[repo].[RepoObjectColumn]" : merge columns, defined in repo.RepoObjectColumn_RequiredRepoObjectColumnMerge
rnote right:0
"[repo].[RepoObjectColumn]" - -> "[repo_sys].[SysColumn]" : write RepoObjectColumn_guid into extended properties of SysObjectColumn, Level2
rnote right:
"[repo_sys].[SysColumn]" ->O "[repo].[RepoObjectColumn]" : SET [is_SysObjectColumn_missing] = 1
rnote right:0
"[repo_sys].[RepoObjectColumn]" ->x "[repo].[RepoObjectColumn]" : where is_SysObjectColumn_missing = 1, but not in objects which are is_repo_managed
rnote right:0
"[repo].[RepoObjectColumn]" ->x "[reference].[RepoObjectColumnSource_virtual]" : DELETE from [reference].[RepoObjectColumnSource_virtual] invalid [Source_RepoObjectColumn_guid]
rnote right:0
"[repo].[RepoObjectColumn]" ->x "[repo].[IndexColumn_virtual]" : DELETE from [repo].[IndexColumn_virtual] invalid columns
rnote right:0

== [graph].[usp_PERSIST_RepoObjectColumn] - start ==

"[graph].[RepoObjectColumn_S]" ->x "[graph].[RepoObjectColumn]" : delete persistence target missing in source
rnote right:0
"[graph].[RepoObjectColumn_S]" ->O "[graph].[RepoObjectColumn]" : update changed
rnote right:2
"[graph].[RepoObjectColumn_S]" -> "[graph].[RepoObjectColumn]" : insert missing
rnote right:42

== [graph].[usp_PERSIST_RepoObjectColumn] - end ==


== [repo].[usp_sync_guid_RepoObjectColumn] - UPDATE [graph].[RepoObjectColumn] - ensure current case ==


== [repo].[usp_sync_guid_RepoObjectColumn] - end ==
@enduml

PlantUML version 1.2021.10(Mon Aug 30 13:43:48 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>