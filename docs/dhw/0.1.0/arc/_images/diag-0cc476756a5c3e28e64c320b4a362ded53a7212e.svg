<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1489px" preserveAspectRatio="none" style="width:5095px;height:1489px;background:#FFFFFF;" version="1.1" viewBox="0 0 5095 1489" width="5095px" zoomAndPan="magnify"><defs><filter height="300%" id="f1bbpftxzxtaz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="260" x2="260" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="771" x2="771" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1247" x2="1247" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1877.5" x2="1877.5" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2427.5" x2="2427.5" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3232" x2="3232" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3408" x2="3408" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3582" x2="3582" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3763" x2="3763" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="4473" x2="4473" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="4622" x2="4622" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="4766" x2="4766" y1="40.7999" y2="1446.0004"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="5028.5" x2="5028.5" y1="40.7999" y2="1446.0004"/><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="506" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="492" x="12" y="25.9999">[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="506" x="5" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="492" x="12" y="1466.0004">[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="489" x="525" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="475" x="532" y="25.9999">[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="489" x="525" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="475" x="532" y="1466.0004">[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="434" x="1028" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="420" x="1035" y="25.9999">[repo].[IndexReferencedReferencing_HasFullColumnsInReferencing]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="434" x="1028" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="420" x="1035" y="1466.0004">[repo].[IndexReferencedReferencing_HasFullColumnsInReferencing]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="141" x="1805.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="1812.5" y="25.9999">[repo].[Index_virtual]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="141" x="1805.5" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="1812.5" y="1466.0004">[repo].[Index_virtual]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="317" x="2267.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="303" x="2274.5" y="25.9999">[repo].[IndexColumn_virtual_referenced_setpoint]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="317" x="2267.5" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="303" x="2274.5" y="1466.0004">[repo].[IndexColumn_virtual_referenced_setpoint]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="188" x="3136" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="3143" y="25.9999">[repo].[IndexColumn_virtual]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="188" x="3136" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="3143" y="1466.0004">[repo].[IndexColumn_virtual]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="137" x="3338" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="3345" y="25.9999">[repo].[Index_gross]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="137" x="3338" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="3345" y="1466.0004">[repo].[Index_gross]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="182" x="3489" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="3496" y="25.9999">[repo].[Index_IndexPattern]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="182" x="3489" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="3496" y="1466.0004">[repo].[Index_IndexPattern]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="153" x="3685" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="3692" y="25.9999">[repo].[Index_Settings]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="153" x="3685" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="3692" y="1466.0004">[repo].[Index_Settings]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="133" x="4405" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="4412" y="25.9999">[repo].[RepoObject]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="133" x="4405" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="4412" y="1466.0004">[repo].[RepoObject]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="137" x="4552" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="4559" y="25.9999">[repo].[Index_union]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="137" x="4552" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="4559" y="1466.0004">[repo].[Index_union]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="122" x="4703" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="4710" y="25.9999">[graph].[Index_S]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="122" x="4703" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="4710" y="1466.0004">[graph].[Index_S]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="105" x="4974.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="4981.5" y="25.9999">[graph].[Index]</text><rect fill="#FEFECE" filter="url(#f1bbpftxzxtaz)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="105" x="4974.5" y="1445.0004"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="4981.5" y="1466.0004">[graph].[Index]</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="71.5999"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="71.5999" y2="71.5999"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="74.5999" y2="74.5999"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="248" x="2420.25" y="60.7999"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="230" x="2426.25" y="77.7999">[repo].[usp_index_inheritance] - start</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="115.1999"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="115.1999" y2="115.1999"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="118.1999" y2="118.1999"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="655" x="2216.75" y="104.3999"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="637" x="2222.75" y="121.4">[repo].[usp_PERSIST_IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T] - start</text><line style="stroke:#A80036;stroke-width:2.0;" x1="242" x2="252" y1="159.6" y2="169.6"/><line style="stroke:#A80036;stroke-width:2.0;" x1="242" x2="252" y1="169.6" y2="159.6"/><line style="stroke:#A80036;stroke-width:1.0;" x1="85" x2="247" y1="164.6" y2="164.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="92" y="160">truncate persistence target</text><path d="M265,143 L265,168 L293,168 L293,153 L283,143 L265,143 " fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M283,143 L283,153 L293,153 L283,143 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="271" y="161">0</text><polygon fill="#A80036" points="271,197.2,261,201.2,271,205.2,267,201.2" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="265" x2="770.5" y1="201.2" y2="201.2"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="277" y="196.6">insert all</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="29" x="776" y="182.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="780" y="199.6">390</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="232"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="232" y2="232"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="235" y2="235"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="652" x="2218.25" y="221.2"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="634" x="2224.25" y="238.2">[repo].[usp_PERSIST_IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T] - end</text><line style="stroke:#A80036;stroke-width:2.0;" x1="1860" x2="1870" y1="273.4" y2="283.4"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1860" x2="1870" y1="283.4" y2="273.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1247" x2="1865" y1="278.4" y2="278.4"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="607" x="1254" y="273.8">DELETE (if it is a referencing index (NOT [referenced_index_guid] IS NULL), but referenced index is missing)</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="1883" y="259.8"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="1887" y="276.8">0</text><polygon fill="#A80036" points="1866,308,1876,312,1866,316,1870,312" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1247" x2="1872" y1="312" y2="312"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="441" x="1254" y="307.4">INSERT (Index which should be inherited in referenced, but not yet referenced)</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="22" x="1883" y="293.4"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="1887" y="310.4">16</text><ellipse cx="1877.5" cy="344.85" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1860.5,341.6,1870.5,345.6,1860.5,349.6,1864.5,345.6" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1247" x2="1866.5" y1="345.6" y2="345.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="371" x="1254" y="341">UPDATE [referenced_index_guid], if NULL but should be inherited</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="1883" y="327"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="1887" y="344">0</text><line style="stroke:#A80036;stroke-width:2.0;" x1="3214" x2="3224" y1="374.2001" y2="384.2001"/><line style="stroke:#A80036;stroke-width:2.0;" x1="3214" x2="3224" y1="384.2001" y2="374.2001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2428" x2="3219" y1="379.2001" y2="379.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="363" x="2435" y="374.6">DELETE (referenced index, where entries are missing in setpoint)</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="3237" y="360.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="3241" y="377.6">0</text><polygon fill="#A80036" points="1889,408.8001,1879,412.8001,1889,416.8001,1885,412.8001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1883" x2="2427" y1="412.8001" y2="412.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1895" y="408.2001">INSERT missing</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="22" x="2433" y="394.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="2437" y="411.2001">22</text><ellipse cx="1877.5" cy="456.6501" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="1878" x2="1920" y1="444.4001" y2="444.4001"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="1920" x2="1920" y1="444.4001" y2="457.4001"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="1883" x2="1920" y1="457.4001" y2="457.4001"/><polygon fill="#A80036" points="1893,453.4001,1883,457.4001,1893,461.4001,1889,457.4001" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="536" x="1885" y="439.8001">Persistence: UPDATE some persistence target index attributes from persistence source indexes</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="2433" y="432.3001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="2437" y="449.3001">3</text><line style="stroke:#A80036;stroke-width:2.0;" x1="1884" x2="1894" y1="484.0001" y2="494.0001"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1884" x2="1894" y1="494.0001" y2="484.0001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1890" x2="3407.5" y1="489.0001" y2="489.0001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="1895" y="484.4001">DELETE duplicates by pattern</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="3413" y="470.4001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="3417" y="487.4001">0</text><ellipse cx="3231.5" cy="521.8501" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="3214.5,518.6001,3224.5,522.6001,3214.5,526.6001,3218.5,522.6001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2428" x2="3220.5" y1="522.6001" y2="522.6001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="780" x="2435" y="518.0001">SET [RepoObjectColumn_guid] = [setpoint].[referencing_RepoObjectColumn_guid], [is_descending_key] = [setpoint].[is_descending_key]</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="3237" y="504.0001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="3241" y="521.0001">0</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="553.4001"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="553.4001" y2="553.4001"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="556.4001" y2="556.4001"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="212" x="2438.25" y="542.6001"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="194" x="2444.25" y="559.6001">[repo].[usp_Index_finish] - start</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="597.0001"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="597.0001" y2="597.0001"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="600.0001" y2="600.0001"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="229" x="2429.75" y="586.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="211" x="2435.75" y="603.2001">[repo].[usp_Index_Settings] - start</text><line style="stroke:#A80036;stroke-width:2.0;" x1="3745.5" x2="3755.5" y1="638.4001" y2="648.4001"/><line style="stroke:#A80036;stroke-width:2.0;" x1="3745.5" x2="3755.5" y1="648.4001" y2="638.4001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="3582" x2="3750.5" y1="643.4001" y2="643.4001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="3589" y="638.8001">DELETE</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="3768" y="624.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="3772" y="641.8001">0</text><polygon fill="#A80036" points="3751.5,673.0002,3761.5,677.0002,3751.5,681.0002,3755.5,677.0002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="3582" x2="3757.5" y1="677.0002" y2="677.0002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="3589" y="672.4002">INSERT</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="22" x="3768" y="658.4001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="3772" y="675.4002">16</text><ellipse cx="3763" cy="709.8502" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="3746,706.6002,3756,710.6002,3746,714.6002,3750,710.6002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="3582" x2="3752" y1="710.6002" y2="710.6002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="3589" y="706.0002">UPDATE</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="3768" y="692.0002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="3772" y="709.0002">0</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="741.4002"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="741.4002" y2="741.4002"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="744.4002" y2="744.4002"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="226" x="2431.25" y="730.6002"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="208" x="2437.25" y="747.6002">[repo].[usp_Index_Settings] - end</text><line style="stroke:#A80036;stroke-width:2.0;" x1="1884" x2="1894" y1="782.8002" y2="792.8002"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1884" x2="1894" y1="792.8002" y2="782.8002"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1890" x2="3231" y1="787.8002" y2="787.8002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262" x="1895" y="783.2002">DELETE [repo].[Index_virtual] without columns</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="3237" y="769.2002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="3241" y="786.2002">0</text><line style="stroke:#A80036;stroke-width:2.0;" x1="1884" x2="1894" y1="816.4002" y2="826.4002"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1884" x2="1894" y1="826.4002" y2="816.4002"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1890" x2="3407.5" y1="821.4002" y2="821.4002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="1895" y="816.8002">DELETE duplicates by pattern</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="22" x="3413" y="802.8002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="3417" y="819.8002">10</text><ellipse cx="3763" cy="865.2502" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="3763.5" x2="3805.5" y1="853.0002" y2="853.0002"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="3805.5" x2="3805.5" y1="853.0002" y2="866.0002"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="3768.5" x2="3805.5" y1="866.0002" y2="866.0002"/><polygon fill="#A80036" points="3778.5,862.0002,3768.5,866.0002,3778.5,870.0002,3774.5,866.0002" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="696" x="3770.5" y="848.4002">SET [IndexSemanticGroup] = [TSource].[IndexSemanticGroup] (via [T1].[referenced_index_guid] = [TSource].[index_guid])</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="4478" y="840.9002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="4482" y="857.9002">2</text><ellipse cx="3763" cy="907.8502" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="3763.5" x2="3805.5" y1="895.6002" y2="895.6002"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="3805.5" x2="3805.5" y1="895.6002" y2="908.6002"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="3768.5" x2="3805.5" y1="908.6002" y2="908.6002"/><polygon fill="#A80036" points="3778.5,904.6002,3768.5,908.6002,3778.5,912.6002,3774.5,908.6002" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="606" x="3770.5" y="891.0002">SET [IndexSemanticGroup] = [TSource].[IndexSemanticGroup] (via [repo].[ForeignKey_Index_guid_union])</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="4388" y="883.5002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="4392" y="900.5002">0</text><ellipse cx="1877.5" cy="939.4503" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1894.5,936.2003,1884.5,940.2003,1894.5,944.2003,1890.5,940.2003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1892.5" x2="4472.5" y1="940.2003" y2="940.2003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="682" x="1895" y="935.6003">SET [is_index_primary_key] = 1, [is_index_unique] = 1 (propagate PK from [repo].[RepoObject] into [repo].[Index_virtual])</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="4478" y="921.6002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="4482" y="938.6003">0</text><ellipse cx="1877.5" cy="973.0503" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1894.5,969.8003,1884.5,973.8003,1894.5,977.8003,1890.5,973.8003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1892.5" x2="4621.5" y1="973.8003" y2="973.8003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="477" x="1895" y="969.2003">SET [is_index_primary_key] = 1 (WHERE rop.has_history = 1 and source-index is PK)</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="4627" y="955.2003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="4631" y="972.2003">0</text><ellipse cx="1877.5" cy="1006.6503" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1894.5,1003.4003,1884.5,1007.4003,1894.5,1011.4003,1890.5,1007.4003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1892.5" x2="4621.5" y1="1007.4003" y2="1007.4003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="385" x="1895" y="1002.8003">SET [is_create_constraint] = 1 (WHERE persistence has_history = 1)</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="4627" y="988.8003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="4631" y="1005.8003">0</text><ellipse cx="1877.5" cy="1051.2503" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="1878" x2="1920" y1="1039.0003" y2="1039.0003"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="1920" x2="1920" y1="1039.0003" y2="1052.0003"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="1883" x2="1920" y1="1052.0003" y2="1052.0003"/><polygon fill="#A80036" points="1893,1048.0003,1883,1052.0003,1893,1056.0003,1889,1052.0003" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="348" x="1885" y="1034.4003">SET [is_index_unique] = 1 (each PK is also [is_index_unique])</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="2245" y="1026.9003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="2249" y="1043.9003">0</text><ellipse cx="1877.5" cy="1082.8503" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1894.5,1079.6003,1884.5,1083.6003,1894.5,1087.6003,1890.5,1083.6003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1892.5" x2="4472.5" y1="1083.6003" y2="1083.6003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="437" x="1895" y="1079.0003">SET [is_index_primary_key] = 0 (where RowNumber_PkPerParentObject &gt; 1)</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="4478" y="1065.0003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="4482" y="1082.0003">0</text><ellipse cx="1877.5" cy="1116.4503" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1894.5,1113.2003,1884.5,1117.2003,1894.5,1121.2003,1890.5,1117.2003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1892.5" x2="3407.5" y1="1117.2003" y2="1117.2003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="682" x="1895" y="1112.6003">SET [pk_index_guid] = [pk].[index_guid] (WHERE [is_index_primary_key] = 1 and [RowNumber_PkPerParentObject] = 1)</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="3413" y="1098.6003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="3417" y="1115.6003">0</text><ellipse cx="1877.5" cy="1150.0503" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1894.5,1146.8003,1884.5,1150.8003,1894.5,1154.8003,1890.5,1150.8003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1892.5" x2="4472.5" y1="1150.8003" y2="1150.8003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="1895" y="1146.2003">SET [index_name] = [T2].[index_name_new]</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="4478" y="1132.2003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="4482" y="1149.2003">6</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="1181.6003"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="1181.6003" y2="1181.6003"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="1184.6003" y2="1184.6003"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="241" x="2423.75" y="1170.8003"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="223" x="2429.75" y="1187.8004">[graph].[usp_PERSIST_Index] - start</text><line style="stroke:#A80036;stroke-width:2.0;" x1="5011" x2="5021" y1="1223.0004" y2="1233.0004"/><line style="stroke:#A80036;stroke-width:2.0;" x1="5011" x2="5021" y1="1233.0004" y2="1223.0004"/><line style="stroke:#A80036;stroke-width:1.0;" x1="4766" x2="5016" y1="1228.0004" y2="1228.0004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="4773" y="1223.4004">delete persistence target missing in source</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="5034" y="1209.4004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="5038" y="1226.4004">0</text><ellipse cx="5028.5" cy="1260.8504" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="5011.5,1257.6004,5021.5,1261.6004,5011.5,1265.6004,5015.5,1261.6004" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="4766" x2="5017.5" y1="1261.6004" y2="1261.6004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="4773" y="1257.0004">update changed</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="5034" y="1243.0004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="5038" y="1260.0004">0</text><polygon fill="#A80036" points="5017,1291.2004,5027,1295.2004,5017,1299.2004,5021,1295.2004" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="4766" x2="5023" y1="1295.2004" y2="1295.2004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="4773" y="1290.6004">insert missing</text><rect fill="#FBFB77" filter="url(#f1bbpftxzxtaz)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="15" x="5034" y="1276.6004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="5038" y="1293.6004">6</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="1326.0004"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="1326.0004" y2="1326.0004"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="1329.0004" y2="1329.0004"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="238" x="2425.25" y="1315.2004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="220" x="2431.25" y="1332.2004">[graph].[usp_PERSIST_Index] - end</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="1369.6004"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="1369.6004" y2="1369.6004"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="1372.6004" y2="1372.6004"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="209" x="2439.75" y="1358.8004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="191" x="2445.75" y="1375.8004">[repo].[usp_Index_finish] - end</text><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5088.5" x="0" y="1413.2004"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="1413.2004" y2="1413.2004"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5088.5" y1="1416.2004" y2="1416.2004"/><rect fill="#EEEEEE" filter="url(#f1bbpftxzxtaz)" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="245" x="2421.75" y="1402.4004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="227" x="2427.75" y="1419.4004">[repo].[usp_index_inheritance] - end</text><!--MD5=[cc77bb24fb27ab6c8d71a19c03133860]
@startuml
'skinparam maxmessagesize 220

== [repo].[usp_index_inheritance] - start ==


== [repo].[usp_PERSIST_IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T] - start ==

?->x "[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T]" : truncate persistence target
rnote right:0
"[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing]" -> "[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T]" : insert all
rnote right:390

== [repo].[usp_PERSIST_IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T] - end ==

"[repo].[IndexReferencedReferencing_HasFullColumnsInReferencing]" ->x "[repo].[Index_virtual]" : DELETE (if it is a referencing index (NOT [referenced_index_guid] IS NULL), but referenced index is missing)
rnote right:0
"[repo].[IndexReferencedReferencing_HasFullColumnsInReferencing]" -> "[repo].[Index_virtual]" : INSERT (Index which should be inherited in referenced, but not yet referenced)
rnote right:16
"[repo].[IndexReferencedReferencing_HasFullColumnsInReferencing]" ->O "[repo].[Index_virtual]" : UPDATE [referenced_index_guid], if NULL but should be inherited
rnote right:0
"[repo].[IndexColumn_virtual_referenced_setpoint]" ->x "[repo].[IndexColumn_virtual]" : DELETE (referenced index, where entries are missing in setpoint)
rnote right:0
"[repo].[IndexColumn_virtual_referenced_setpoint]" -> "[repo].[Index_virtual]" : INSERT missing
rnote right:22
"[repo].[Index_virtual]" ->O "[repo].[Index_virtual]" : Persistence: UPDATE some persistence target index attributes from persistence source indexes
rnote right:3
"[repo].[Index_gross]" ->x "[repo].[Index_virtual]" : DELETE duplicates by pattern
rnote right:0
"[repo].[IndexColumn_virtual_referenced_setpoint]" ->O "[repo].[IndexColumn_virtual]" : SET [RepoObjectColumn_guid] = [setpoint].[referencing_RepoObjectColumn_guid], [is_descending_key] = [setpoint].[is_descending_key]
rnote right:0

== [repo].[usp_Index_finish] - start ==


== [repo].[usp_Index_Settings] - start ==

"[repo].[Index_IndexPattern]" ->x "[repo].[Index_Settings]" : DELETE
rnote right:0
"[repo].[Index_IndexPattern]" -> "[repo].[Index_Settings]" : INSERT
rnote right:16
"[repo].[Index_IndexPattern]" ->O "[repo].[Index_Settings]" : UPDATE
rnote right:0

== [repo].[usp_Index_Settings] - end ==

"[repo].[IndexColumn_virtual]" ->x "[repo].[Index_virtual]" : DELETE [repo].[Index_virtual] without columns
rnote right:0
"[repo].[Index_gross]" ->x "[repo].[Index_virtual]" : DELETE duplicates by pattern
rnote right:10
"[repo].[Index_Settings]" ->O "[repo].[Index_Settings]" : SET [IndexSemanticGroup] = [TSource].[IndexSemanticGroup] (via [T1].[referenced_index_guid] = [TSource].[index_guid])
rnote right:2
"[repo].[Index_Settings]" ->O "[repo].[Index_Settings]" : SET [IndexSemanticGroup] = [TSource].[IndexSemanticGroup] (via [repo].[ForeignKey_Index_guid_union])
rnote right:0
"[repo].[RepoObject]" ->O "[repo].[Index_virtual]" : SET [is_index_primary_key] = 1, [is_index_unique] = 1 (propagate PK from [repo].[RepoObject] into [repo].[Index_virtual])
rnote right:0
"[repo].[Index_union]" ->O "[repo].[Index_virtual]" : SET [is_index_primary_key] = 1 (WHERE rop.has_history = 1 and source-index is PK)
rnote right:0
"[repo].[Index_union]" ->O "[repo].[Index_virtual]" : SET [is_create_constraint] = 1 (WHERE persistence has_history = 1)
rnote right:0
"[repo].[Index_virtual]" ->O "[repo].[Index_virtual]" : SET [is_index_unique] = 1 (each PK is also [is_index_unique])
rnote right:0
"[repo].[RepoObject]" ->O "[repo].[Index_virtual]" : SET [is_index_primary_key] = 0 (where RowNumber_PkPerParentObject > 1)
rnote right:0
"[repo].[Index_gross]" ->O "[repo].[Index_virtual]" : SET [pk_index_guid] = [pk].[index_guid] (WHERE [is_index_primary_key] = 1 and [RowNumber_PkPerParentObject] = 1)
rnote right:0
"[repo].[RepoObject]" ->O "[repo].[Index_virtual]" : SET [index_name] = [T2].[index_name_new]
rnote right:6

== [graph].[usp_PERSIST_Index] - start ==

"[graph].[Index_S]" ->x "[graph].[Index]" : delete persistence target missing in source
rnote right:0
"[graph].[Index_S]" ->O "[graph].[Index]" : update changed
rnote right:0
"[graph].[Index_S]" -> "[graph].[Index]" : insert missing
rnote right:6

== [graph].[usp_PERSIST_Index] - end ==


== [repo].[usp_Index_finish] - end ==


== [repo].[usp_index_inheritance] - end ==
@enduml

@startuml

== [repo].[usp_index_inheritance] - start ==


== [repo].[usp_PERSIST_IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T] - start ==

?->x "[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T]" : truncate persistence target
rnote right:0
"[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing]" -> "[repo].[IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T]" : insert all
rnote right:390

== [repo].[usp_PERSIST_IndexColumn_ReferencedReferencing_HasFullColumnsInReferencing_T] - end ==

"[repo].[IndexReferencedReferencing_HasFullColumnsInReferencing]" ->x "[repo].[Index_virtual]" : DELETE (if it is a referencing index (NOT [referenced_index_guid] IS NULL), but referenced index is missing)
rnote right:0
"[repo].[IndexReferencedReferencing_HasFullColumnsInReferencing]" -> "[repo].[Index_virtual]" : INSERT (Index which should be inherited in referenced, but not yet referenced)
rnote right:16
"[repo].[IndexReferencedReferencing_HasFullColumnsInReferencing]" ->O "[repo].[Index_virtual]" : UPDATE [referenced_index_guid], if NULL but should be inherited
rnote right:0
"[repo].[IndexColumn_virtual_referenced_setpoint]" ->x "[repo].[IndexColumn_virtual]" : DELETE (referenced index, where entries are missing in setpoint)
rnote right:0
"[repo].[IndexColumn_virtual_referenced_setpoint]" -> "[repo].[Index_virtual]" : INSERT missing
rnote right:22
"[repo].[Index_virtual]" ->O "[repo].[Index_virtual]" : Persistence: UPDATE some persistence target index attributes from persistence source indexes
rnote right:3
"[repo].[Index_gross]" ->x "[repo].[Index_virtual]" : DELETE duplicates by pattern
rnote right:0
"[repo].[IndexColumn_virtual_referenced_setpoint]" ->O "[repo].[IndexColumn_virtual]" : SET [RepoObjectColumn_guid] = [setpoint].[referencing_RepoObjectColumn_guid], [is_descending_key] = [setpoint].[is_descending_key]
rnote right:0

== [repo].[usp_Index_finish] - start ==


== [repo].[usp_Index_Settings] - start ==

"[repo].[Index_IndexPattern]" ->x "[repo].[Index_Settings]" : DELETE
rnote right:0
"[repo].[Index_IndexPattern]" -> "[repo].[Index_Settings]" : INSERT
rnote right:16
"[repo].[Index_IndexPattern]" ->O "[repo].[Index_Settings]" : UPDATE
rnote right:0

== [repo].[usp_Index_Settings] - end ==

"[repo].[IndexColumn_virtual]" ->x "[repo].[Index_virtual]" : DELETE [repo].[Index_virtual] without columns
rnote right:0
"[repo].[Index_gross]" ->x "[repo].[Index_virtual]" : DELETE duplicates by pattern
rnote right:10
"[repo].[Index_Settings]" ->O "[repo].[Index_Settings]" : SET [IndexSemanticGroup] = [TSource].[IndexSemanticGroup] (via [T1].[referenced_index_guid] = [TSource].[index_guid])
rnote right:2
"[repo].[Index_Settings]" ->O "[repo].[Index_Settings]" : SET [IndexSemanticGroup] = [TSource].[IndexSemanticGroup] (via [repo].[ForeignKey_Index_guid_union])
rnote right:0
"[repo].[RepoObject]" ->O "[repo].[Index_virtual]" : SET [is_index_primary_key] = 1, [is_index_unique] = 1 (propagate PK from [repo].[RepoObject] into [repo].[Index_virtual])
rnote right:0
"[repo].[Index_union]" ->O "[repo].[Index_virtual]" : SET [is_index_primary_key] = 1 (WHERE rop.has_history = 1 and source-index is PK)
rnote right:0
"[repo].[Index_union]" ->O "[repo].[Index_virtual]" : SET [is_create_constraint] = 1 (WHERE persistence has_history = 1)
rnote right:0
"[repo].[Index_virtual]" ->O "[repo].[Index_virtual]" : SET [is_index_unique] = 1 (each PK is also [is_index_unique])
rnote right:0
"[repo].[RepoObject]" ->O "[repo].[Index_virtual]" : SET [is_index_primary_key] = 0 (where RowNumber_PkPerParentObject > 1)
rnote right:0
"[repo].[Index_gross]" ->O "[repo].[Index_virtual]" : SET [pk_index_guid] = [pk].[index_guid] (WHERE [is_index_primary_key] = 1 and [RowNumber_PkPerParentObject] = 1)
rnote right:0
"[repo].[RepoObject]" ->O "[repo].[Index_virtual]" : SET [index_name] = [T2].[index_name_new]
rnote right:6

== [graph].[usp_PERSIST_Index] - start ==

"[graph].[Index_S]" ->x "[graph].[Index]" : delete persistence target missing in source
rnote right:0
"[graph].[Index_S]" ->O "[graph].[Index]" : update changed
rnote right:0
"[graph].[Index_S]" -> "[graph].[Index]" : insert missing
rnote right:6

== [graph].[usp_PERSIST_Index] - end ==


== [repo].[usp_Index_finish] - end ==


== [repo].[usp_index_inheritance] - end ==
@enduml

PlantUML version 1.2021.8(Sat Jun 26 08:20:59 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>